imports:
    - { resource: "@SyliusCoreBundle/Resources/config/app/config.yml" }

    - { resource: "@SyliusAdminBundle/Resources/config/app/config.yml" }

    - { resource: "@SyliusShopBundle/Resources/config/app/config.yml" }

    - { resource: "@SyliusApiBundle/Resources/config/app/config.yaml" }

    - { resource: "@BitBagSyliusMultiVendorMarketplacePlugin/Resources/config/config.yml"}

parameters:
    sylius_core.public_dir: '%kernel.project_dir%/public'

sylius_shop:
    product_grid:
        include_all_descendants: true

winzou_state_machine:
    mvm_product_listing:
        class: 'BitBag\SyliusMultiVendorMarketplacePlugin\Entity\ProductListing\ProductDraft'
        property_path: status
        graph: product_draft
        states:
            created: ~
            under_verification: ~
            verified: ~
            rejected: ~
        transitions:
            send_to_verification:
                from: ['created']
                to: 'under_verification'
            accept_product_draft:
                from: ['under_verification']
                to: 'verified'
            reject_product_draft:
                from: ['under_verification']
                to: 'rejected'
        callbacks:
            after:
                send_to_verification:
                    on: [ 'send_to_verification' ]
                    do: [ '@bitbag_sylius_multi_vendor_marketplace_plugin.state_machine.product_draft', 'sendToVerify' ]
                    args: [ 'object' ]
                accept_product_listing:
                    on: ['accept_product_draft']
                    do: ['@bitbag_sylius_multi_vendor_marketplace_plugin.state_machine.product_draft', 'verify']
                    args: ['object']
                reject_product_listing:
                    on: [ 'reject_product_draft' ]
                    do: [ '@bitbag_sylius_multi_vendor_marketplace_plugin.state_machine.product_draft', 'reject' ]
                    args: [ 'object' ]
